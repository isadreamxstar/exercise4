$w=$(window);$d=$(document);
(function(d,F,k,s,R){function S(a,b,c,j){var b=b||100,e,d,f,m,l,i,k=function(){var h=+new Date;h-m<b&&(!j||h-l<j)?e=setTimeout(k,b-(h-m)):(e=null,c||(i=a.apply(f,d),f=d=null))};return function(){f=this;d=arguments;m=+new Date;l||(l=+new Date);var j=c&&!e;e||(e=setTimeout(k,b));j&&(i=a.apply(f,d),f=d=null);return i}}function P(a,b){b=b||150;return S(a,b,!1,b)}function T(a){a=a||d.event;a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()}function x(a){a=a||d.event;a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1}function U(){var a={};d.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,j){a[c]=j});return a}function V(a){var b=a.fixed,c=a.pad||0,j=a.w?Math.min(a.w,k.width()-2*c):"auto",e=a.h||"auto",d=a.top||0,f=a.opacity||60,m=a.iframe,l=!!a.full,i=a.img,p=$(".BOX").length;l&&(b=!0,j=e="100%");var h=$("<div/>",{"class":"mask-back",css:{opacity:f/100,"z-index":5999+p}}),g=$("<div/>",{"class":"BOX ",css:{width:j,
height:m?e+10:e,background:a.bg||"#fff",position:b?"fixed":"absolute",top:d,padding:c,"z-index":6E3+p}});l&&g.css("left",0);var n=function(){g.css("margin-left",-g.width()/2-c)},o=function(){if(!l){n();b?g.css({top:"50%","margin-top":-g.height()/2}):d||g.css({top:k.scrollTop()+Math.max(k.height()/2-g.height()/2,10)})}},v=function(a){a.which===27&&r()},r=this.hide=function(){if(a.onclose)a.onclose();h.remove();g.remove();k.off("resize",n);s.off("keyup",v)};this.size=function(a,b,c){g.width(j=a).height(e=
b);c&&o()};m=m?"<iframe width="+j+" height="+e+' frameborder=0 src="'+m+'"></iframe>':"";i&&(i=$('<img style="vertical-align:top;" src="'+i+'"/>'),f=function(){o();g.show();var a=i[0].height/i[0].width;j=j==="auto"?Math.min(i[0].width,k.width()-2*c):j;e=j*a;i.css({width:j,height:e})},i.load(f),i[0].complete&&f());g.html(i||m||a.html);a.hideX||g.append($('<div class="x">&times</div>').click(r));a.noMaskClick||(h.click(r),s.on("keyup",v));$("body").append(h).append(g);i||(o(),g.show());a.onopen&&a.onopen();
k.on("resize",n)}function w(){return I.user&&I.user.id}function W(){p("Logging in...");$.ajax({url:"/ajax_login",type:"post",dataType:"json",data:{email:$("#email").val(),pass:$("#pass").val(),stayLogged:$("#stayLogged").prop("checked")?1:0},success:function(a){a.error?(p(!1),error_dialog(a.error)):d.location.reload()}})}function ea(){p("Logging out...");var a=$.get("/ajax_logout");d.google_login_callback=function(b){console.log(b);b.error?$.when(a).done(function(){d.location.reload()}):d.gapi.auth.signOut()};
$("body").append('<div id="google-login-button" style="display:none"></div>');$.getScript("https://apis.google.com/js/client:platform.js?onload=render_google_login_button")}function X(){var a=$("#suser").val(),b=$("#semail").val(),c=$("#pass1").val(),j=$("#pass2").val(),e="";if(""===a||""===b||""===c||""===j)e+="<li>Fill in all fields!</li>";c!==j&&(e+="<li>Password Mismatch, try again</li>");-1!==a.search(" ")&&(e+="<li>Username cannot contain spaces! Try dash or underscore.</li>");0!==b.search(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i)&&
(e+="<li>Type a valid email</li>");return e?($("#loginMessage").html(e),!1):!0}function A(){var a='<div id="loginFrame"><div class="clear"></div><div class="loginBox pane"><h2>Login</h2><div id="loginMessage"></div><div id="google-login-button" class="but lrg">Login with Google</div><div class="login-or">- OR -</div><form id="lForm" method="post"><div>Email or Username</div><input id="email" name="email" type="text" autocomplete="email" value="'+decodeURIComponent((F.cookie.split("rootemail=")[1]||
"").split(";")[0])+'"/><div>Password <span><a href="/forgot" tabindex="-1">forgot?</a></span></div><input id="pass" name="pass" type="password"/></form><label class="stay"><input type="checkbox" id="stayLogged" name="stayLogged" checked="checked" value="1"/> Stay Logged In</label><div id="login-button" class="b but lrg loginButton">Login</div></div><div class="loginBox pane"><h2>Signup</h2><form id="sForm" method="post" action="/signup?redirect='+d.location.href+'"><div>Email</div><input id="semail" name="email" type="email" autocomplete="email"/><div>Username</div><input id="suser" name="user" type="text"/><div>Password</div><input id="pass1" name="pass" type="password"/><div>Pass again</div><input id="pass2" type="password"/><div id="captchaBox"></div><label class="stay"><input type="checkbox" id="stay2" name="stayLogged" checked="checked" value="1"/> Stay Logged In</label><input type="submit" class="y but lrg loginButton" value="Signup"/></form></div></div>';
BOX.show({html:a,bg:"transparent",pad:10,top:50});$.getScript("https://apis.google.com/js/client:platform.js?onload=render_google_login_button");$("#lForm input").keydown(function(a){13==a.which&&W()});$("#email").val()?$("#pass").focus():$("#semail").focus();$.getScript(("https:"===location.protocol?"https://api-secure":"http://api")+".solvemedia.com/papi/challenge.ajax",function(){d.ACPuzzle?Y():ACPuzzleInfo.onload=Y})}function Y(){ACPuzzle.create("7zudDMjHnJg.0EWZ5dyMM6AYyu57iCOq","captchaBox")}
function Q(){$("#miniNots").hide().find(".new").removeClass("new");$("#numNots").text(0).removeClass("has-nots");s.off("click",Q)}function fa(a){x(a);var b=$("#miniNots");"none"===b.css("display")?(b.show(),""===b.html()&&(b.html('<img class="load" src="//s.imgflip.com/preloader.gif"/>'),$.ajax({url:"/getNots?len=5",success:function(a){b.html("<div class='notifs'><a class='notif all' href='/notifications'>View All Notifications</a></div>").find(".notifs").prepend(a)}}),b.click(T)),s.on("click",Q)):
Q()}function ga(){var a=$(this).closest(".com").attr("id").substr(3);confirm("Delete comment?")&&$.ajax({url:"/ajax_com_delete",data:"cid="+a,success:function(a){!a>>0?alert(a):$("#com"+a).slideUp(function(){$(this).remove()})}})}function ha(){if(w()){var a=$(this).closest(".com"),b=a.find(".c-new-wrap");b[0]?b.find(".c-new-text").val()||b.remove():(b=$("#c-new-main").clone(),b.attr("id",""),a.append(b),b.find(".c-new-text").focus())}else A()}function H(a){$(a).each(function(){var a=$(this);a.data("dimImage")||
(a.data("dimImage",!0),a.click(function(){BOX.show({img:a.attr("src")});a.hasClass("ctx-gif")?$(".BOX img").addClass("ctx-gif"):$(".BOX img").removeClass("ctx-gif")}))})}function N(a){k[!1===a?"off":"on"]("keydown",ia)}function ia(a){if(!a.metaKey&&!a.ctrlKey&&!a.altKey)switch(a.which){case 83:case 72:E(img.id,0,".img-vote-wrap");break;case 87:case 76:E(img.id,1,".img-vote-wrap");break;case 68:Z();break;case 74:case 39:$("#img-next").click();break;case 75:case 37:$("#img-prev").click();break;case 65:d.history.back()}}
function Z(){var a,b=$(this).attr("id")||"hotkey",c=function(){a?d.location=a:setTimeout(c,10)};_gaq.push(["_set","hitCallback",c]);_gaq.push(["_trackEvent","Flip Nav",b,location.href]);$.get("/ajax_img_flip?current_iid="+(d.img?d.img.id>>0:0),function(b){a=b;27===I.user.id&&c()})}function E(a,b,c){if(I.done)if(w()){if(a){var j=$(c),c=j.find(".img-up"),j=j.find(".img-down"),e=c.hasClass("set"),d=j.hasClass("set");c.add(j).removeClass("set");!b&&!d?j.addClass("set"):b&&!e&&c.addClass("set");$.ajax({url:"/ajax_vote",
dataType:"json",data:{val:+b,iid:a},success:function(a){a.error&&error_dialog(a.error)}})}}else A()}function ja(){if(I.done)if(w()){var a=$(this),b=a.closest(".com").attr("id").substr(3)>>0,c=!1,j=!1,e="#com"+b;$(e+" .c-up").hasClass("set")&&(c=!0);$(e+" .c-down").hasClass("set")&&(j=!0);var d=!a.hasClass("set");a.parent().find(".set").removeClass("set");d&&a.addClass("set");var a=a.hasClass("c-up")?"good":"bad",e=$(e+" .points").first(),f=parseInt(e.text());if(j&&"good"===a)f+=2;else if(c&&"bad"===
a)f-=2;else if("good"===a&&d||"bad"===a&&!d)f+=1;else if("good"===a&&!d||"bad"===a&&d)f-=1;e.text(1==f?f+" point":f+" points");$.ajax({url:"/ajax_comment_vote",data:{val:a,cid:b},success:function(a){a&&alert(a)}})}else A()}function aa(a,b,c){if(!a||submitting)return!1;submitting=!0;var b=b>>0,j=c.find(".c-new-text").val()||"",e=c.closest(".com"),d=(e.attr("id")||"").substr(3)||0,f="";if(!b&&(j==R||""==j))f+="<li>Enter some text</li>";""!==f?(error_dialog(f),submitting=!1):(p("Adding comment..."),
$.ajax({url:"/ajax_add_comment",type:"post",dataType:"json",data:{text:j,iid:a,comImage:b,parent_id:d,level:d?~~e.data("l")+1:0},success:function(a){if(a.error)error_dialog(a.error);else{a=$(a.com_html);if(d)c.remove(),e.after(a);else{$("#c-new-main").find(".c-new-text").val("");var b=$("#comments");b.append(a);b=b.offset().top+b.innerHeight()-(k.scrollTop()+k.height());0<b&&$("html,body").animate({scrollTop:"+="+(b+150)})}H(".c-text img");ba(a)}},complete:function(){p(!1);submitting=!1}}))}function ba(a){var b=
I.user,c,d;$(a||".com").quickEach(function(){c=this.attr("id").substr(3);I.com_votes[c]&&(d="1"===I.com_votes[c]?".c-up":".c-down",this.find(d).addClass("set"));var a=this.data("uid");(4<b.priv||b.id==a||b.id===img.stream_owner_uid)&&!this.find(".c-delete")[0]&&this.find(".comTitle").before('<div class="c-delete a">delete</div>')})}function p(a){!1===a?(B&&B.remove(),O=B=!1):(B||(B=$('<div id="site-loading"><div id="site-loading-inner"><div id="site-loading-msg"></div><div id="site-loading-bar"><div id="site-loading-progress"></div></div></div></div>'),
$("body").append(B)),$("#site-loading-msg").html(a||"Loading..."))}function ka(){var a='<div class="img-flag-popup" data-iid="'+$(this).data("iid")+'"><div class="img-flag-title">Flag Image</div><div class="img-flag-label">Reason:</div><select class="img-flag-select"><option value></option>'+(27===I.user.id?'<option value="img-sfw">SFW</option>':"")+'<option value="img-nsfw">NSFW (adult/mature content)</option><option value="img-spam">Spam (advertising, website spam, etc)</option><option value="img-abuse">Abuse (anything breaching our Terms of Service)</option></select><div class="img-flag-label">Additional Comments [optional]</div><textarea class="img-flag-text" maxlength="200"></textarea><div class="img-flag-submit b but">Submit</div><div class="img-flag-cancel l but">Cancel</div></div>';
BOX.show({html:a})}function la(){BOX.hide()}function ma(){var a=$(this).closest(".img-flag-popup"),b=a.data("iid"),c=a.find(".img-flag-select").val(),a=a.find(".img-flag-text").val();c?(p(),$.ajax({url:"/ajax_flag",type:"post",dataType:"json",data:{iid:b,type:c,text:a},success:function(a){p(!1);BOX.hide();$('.img-flag[data-iid="'+b+'"]').remove();a.error?MSG(a.error,"red"):MSG(a.message,"green")}})):MSG("Select a reason","red")}function ca(a){p();$.get("/ajax_submit_popup",{iid:a,subsLeft:I.user.subsLeft},
function(b){p(!1);BOX.show({html:b,bg:"transparent"});$("#submit-submit").click(function(){na(a)});$("#submit-cancel").click(function(){BOX.hide()})})}function na(a){BOX.hide();p("Submitting image...");$.get("/ajax_submit_creation?iid="+a,function(a){p(!1);a?error_dialog(a):BOX.show({html:"<h2>Image submitted successfully!</h2><p>Sharing your image will make it more likely to reach the homepage.</p>",w:400,pad:20})})}function da(a,b){var c="/pro?from="+b,a=a.replace(/Imgflip Pro/,'<a href="'+c+'">Imgflip Pro</a>');
BOX.show({html:'<div class="pro-msg">'+a+'</div><a class="b but pro-learn-more" href="'+c+'">Learn More &rsaquo;</a>',w:500,pad:20})}I=d.I||{user:{}};d._gaq=d._gaq||[];d.console||(console={});console.log||(console.log=function(){});$.ajaxSetup({cache:!0});$(F).ajaxError(function(a,b,c,d){if(c.url[0]==="/"&&c.url!=="/ajax_get_le_data"){_gaq.push(["_trackEvent","ajaxError",c.url,(b.status||"")+"|"+(b.responseText||"").substr(0,100)+"|"+d]);p(false);error_dialog("Request error. Try again in a minute. If this keeps happening, and other websites (e.g. google.com) still load fine, let us know with the Feedback button!")}});
var oa=k.width();$.fn.quickEach=function(){var a=jQuery([1]);return function(b){var c=-1,d,e=this.length;try{for(;++c<e&&(d=a[0]=this[c])&&b.call(a,c,d)!==false;);}catch(k){delete a[0];throw k;}delete a[0];return this}}();d.debounce=S;d.throttle=P;d.stopProp=T;d.cancelEvent=x;$.fn.fieldFill=function(a,b){var c=$(this).val();b==R&&(b="#666");(c==""||c==a)&&$(this).val(a).css("color",b);$(this).focus(function(){$(this).val()==a&&$(this).val("").css("color","#000")});$(this).blur(function(){$(this).val()==
""&&$(this).val(a).css("color",b)});return this};d.GET=U;Array.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0;c<this.length;c++)if(this[c]==a)return c;return-1});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});webkitWarn=function(a){var b=navigator.userAgent,c="";if(b.search(/webkit|firefox/i)===-1){c=c+("Please note: the "+a+' performs best in a modern web browser such as <a href="https://www.google.com/chrome">Chrome</a> or <a href="http://www.mozilla.org/firefox">Firefox</a>');
b.search(/MSIE [6-9]/)!==-1&&(c=c+' <p style="color:#f44">Internet Explorer versions 6-9 tend to be very error prone</p>')}c&&$("#generator-qa").prepend("<h2>"+c+"</h2>")};var y;d.Box=V;d.BOX={show:function(a){y=new V(a)},hide:function(){y&&y.hide()},size:function(){y&&y.size()}};DLG=function(a,b){BOX.show({html:"<p><b>"+a+"</b></p><p>"+b+"</p>",w:400,pad:20})};error_dialog=function(a){DLG("Error",a)};MSG=function(){var a,b;return function(c,d,e){if(c===false&&a)a.hide();else{d=d||"white";e=e||5E3;
a||(a=$('<div id="quick-msg">').appendTo("body"));a.html(c).css({"margin-left":-a.outerWidth()/2,top:10}).attr("class",d).stop().fadeIn(200);clearTimeout(b);b=setTimeout(function(){a.fadeOut(1E3)},e)}}}();d.Dragger=function(a,b,c,d){function e(a,b,q,d,t){h=a;g=b;n=q;o=d;c&&c(h,g,n,o);t&&i.css({transform:"scale3d(0,0,0)"});i.css({left:~~h-1,top:~~g-1,width:~~n,height:~~o});if(t){i.css({transition:"1s",transform:"scale3d(1,1,1)"});setTimeout(function(){i.css({transition:""})},1500)}}function k(a){x(a);
L=p.width();M=p.height();J=n;z=o;v=h;r=g;C=a.clientX;G=a.clientY;$("body").addClass("nosel");s.on("vmousemove",f).on("vmouseup",m)}function f(a){if(q){u=a.clientX-C;t=a.clientY-G;if(q===1){h=v+u;g=r+t;h<0?h=0:h+n>L&&(h=L-n);g<0?g=0:g+o>M&&(g=M-o)}if(q==2||q==6||q==7){g=r+t;o=z-t;if(g<0){g=0;o=z+r}else if(o<l){o=l;g=r+z-l}}else if(q==4||q==8||q==9){o=z+t;g+o>M?o=M-g:o<l&&(o=l)}if(q==5||q==6||q==9){h=v+u;n=J-u;if(h<0){h=0;n=J+v}else if(n<l){n=l;h=v+J-l}}else if(q==3||q==7||q==8){n=J+u;h+n>L?n=L-h:n<
l&&(n=l)}e(h,g,n,o)}}function m(){q=0;$("body").removeClass("nosel");s.off("vmouseup",m)}for(var d=d||{},l=d.minWidth||20,i=$(a),p=$(b),h=0,g=0,n=l,o=l,v,r,J,z,q,u,t,L,M,C,G,D=["N","E","S","W","NW","NE","SE","SW"],a="",b=0;b<D.length;b++)a=b<4?a+('<div class="wrap'+D[b]+'"><div class="resize '+D[b]+'" data-dir="'+D[b]+'"></div></div>'):a+('<div class="resize '+D[b]+'" data-dir="'+D[b]+'"></div>');this.getVals=function(){return{x:h,y:g,w:n,h:o}};this.setVals=e;i.on("vmousedown",function(a){q=1;k(a)}).on("vmousedown",
".resize",function(a){q=D.indexOf($(this).attr("data-dir"))+2;k(a)});i.html(a)};d.hoverGifs=function(a){$(a).find("a img").each(function(){var a=$(this)[0];$(this).hover(function(){a.src=a.src.replace(/\/2\/([a-z0-9]+)\.jpg/,"/$1.gif")},function(){a.src=a.src.replace(/\/([a-z0-9]+)\.gif/,"/2/$1.jpg")})})};applyTips=function(a){(a&&a.jquery?a.find(".tip"):typeof a==="string"?$(a+" .tip"):$(".tip")).each(function(){var a,c=$(this);c.parent().hover(function(d){a=setTimeout(function(){var a=c.text().length,
b=d.clientX,f=d.clientY,m=k.width(),l=k.height(),a=Math.min(260+a/5>>0,Math.max(m-b,b)-40);c.width(a);f=f>l/2?f-c.height()-20:f+20;c.css({top:f,left:b>l/2?b-a-20:b+20}).fadeIn(200)},c.attr("data-delay")||400)},function(){clearTimeout(a);c.fadeOut(200)}).click(function(){clearTimeout(a)})})};d.checkSignup=X;d.showLogin=A;d.render_google_login_button=function(){gapi.signin.render("google-login-button",{callback:"google_login_callback",clientid:"16163237658-20l9nkv7bci04f890j3rocd67cpdbmu0.apps.googleusercontent.com",
cookiepolicy:"single_host_origin",scope:"profile email",redirecturi:"postmessage",accesstype:"offline"})};d.google_login_callback=function(a){if(a.code){p("Logging in...");var b=U();$.ajax({type:"POST",url:"/ajax_google_login",data:{code:a.code,claim_iid:b.claim_iid},dataType:"json",success:function(a){if(a.error){p(false);error_dialog(a.error)}else b.claim_iid?d.location="/i/"+(~~b.claim_iid).toString(36)+"?herp="+ +new Date:d.location.reload()}})}else a.error?console.log("There was an error: "+
a.error):console.log("wtf?!")};d.dimImage=H;d.navKeys=N;d.vote=E;d.comment=aa;var B;d.loading=p;var O;d.progress=function(a){if(!O){$("#site-loading-bar").show();O=$("#site-loading-progress")}O.width(a*100+"%")};d.submitImg=ca;d.signCanvas=function(a,b,c,d){d=d||4E4;if(!(I.user.pro&&$(".gen-no-watermark").prop("checked")===true)&&!(b*c<=d)){a.save();a.font="10px Arial";a.fillStyle="#ddd";a.shadowBlur=2;a.shadowColor="#000";for(b=0;b<7;b++)a.fillText("imgflip.com",3,c-4);a.restore()}};d.upgradeBox=
da;(function(a){function b(b){$(".main-tag").change(function(){var d="",c=[];c[0]=$("#show-other")[0];c[1]=$("#show-memes")[0];c[2]=$("#show-gifs")[0];for(var e=0;e<3;e++)d=c[e].checked?d+"1":d+"0";_gaq.push(["_trackEvent","main_tags",(w()?"logged-in: ":"")+d,a.location.href]);$.ajax({url:"/ajax_main_tags",data:"cookie_tags="+d,success:b})});s.on("click","#safe-button",function(a){if(!I.done)return x(a);var d=$(this).parent().hasClass("safe-status-SFW")?"NSFW":"SFW",c=d==="SFW"?"NSFW":"SFW";_gaq.push(["_trackEvent",
"SFW Button",c+" --\> "+d,(!w()?"not ":"")+"logged in"]);if(!w()){x(a);return A()}$(this).parent().removeClass("safe-status-"+c).addClass("safe-status-"+d);$.ajax({url:"/ajax_safemode",data:"safe="+d,success:b})})}function d(a){if(a)location.href=location.href.replace(/\/\?tgz=([10]{3}|memes|gifs)/,"")}function j(a){a&&$("#flip-notify").html("Your next flip will reflect your new settings").fadeIn()}function e(){s.on("contextmenu","img.ctx-gif",function(a){var b=/\/([a-z0-9]+)\.gif/.exec($(this).attr("src"));
if(b){_gaq.push(["_trackEvent","gif contextmenu",location.pathname,b[1]]);b='<div class="img-code-menu">'+m(b[1],"gif")+"</div>";BOX.show({html:b,w:360});return x(a)}}).on("click",".img-code",function(){$(this).select()}).on("click","#img-download,.img-code",function(){_gaq.push(["_trackEvent",$(this).attr("class"),location.pathname,$(this).attr("href")])})}function B(){s.on("vclick",".pause-gif",function(a){var b=$(this),d=b.find("img"),c=d.attr("src");c&&d.attr("src",c.replace("/2/","/").replace(".jpg",
".gif"));b.removeClass("pause-gif");return x(a)})}function f(){$(".img-embed-codes").each(function(){var a=$(this);a.html()||a.html(m(img.id.toString(36),img.type,false,true,img.generator));a.toggle()})}function m(a,b,d,c,e){var f,j;switch(e){case "gif":f="GIF";j="gifgenerator";break;case "meme":f="Meme";j="memegenerator";break;case "pie":f="Pie Chart";j="piemaker"}var g=a+"."+b,h="https://i.imgflip.com/"+g,l="https://imgflip.com/"+(b==="gif"?"gif/":"i/")+a,i="";d||(i=i+('<div class="img-code-wrap"><div class="img-code-label">Image Link:</div><input type="text" class="img-code link" value="'+
l+'"/></div><div class="img-code-wrap"><div class="img-code-label">BBCode (forums):</div><input type="text" class="img-code forum" value="'+("[url="+l+"][img]"+h+"[/img][/url]"+(f?"[url=https://imgflip.com/"+j+"]via Imgflip "+f+" Maker[/url]":""))+'"/></div><div class="img-code-wrap"><div class="img-code-label">Image HTML:</div><input type="text" class="img-code html" value=\''+('<a href="'+l+'"><img src="'+h+'"'+(e?' title="made at imgflip.com"':"")+"/></a>")+"'/></div>"));if(!c){c="";if(F.createElement("a").hasOwnProperty("download")){a=
d?"https://i2.imgflip.com/"+g:h;c=' download="'+g+'"'}else a="/download_image?idsmall="+a+"&ext="+b;i=i+('<div class="img-code-wrap"><a id="img-download" class="img-download l but" href="'+a+'"'+c+">Download Image</a></div>")}return i}function l(b,d,c,e){var f="https://imgflip.com/"+(c==="gif"?"gif/":"i/")+d,d="http://i.imgflip.com/"+d+"."+c;$(b).html('<div class="pw-widget pw-size-large" pw:image="'+d+'" pw:url="'+f+'"'+(e?' pw:title="'+e+'"':"")+' pw:twitter-via="imgflip"><a class="pw-button-facebook"></a><a class="pw-button-twitter"></a><a class="pw-button-reddit"></a><a class="pw-button-tumblr"></a><a class="pw-button-pinterest"></a><a class="pw-button-post"></a></div>');
(function G(){a.post_init?post_init():setTimeout(G,50)})()}function i(a,b,d,c){if(I.user.pro)return"";var e="display:inline-block;vertical-align:top;";b&&d&&(e=e+("width:"+b+"px;height:"+d+"px;"));b=b&&d?"":" imgflip-banner-top";$.getScript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js");return'<div class="ad"><ins class="adsbygoogle'+b+'" style="'+e+'" data-ad-client="ca-pub-2078578220372194" data-ad-slot="'+a+'"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script>'+
(c?'<div class="ad-pro-callout">tip: <a href="/pro?from=side_ad">Pro users don\'t see ads</a></div>':"")+"</div>"}function y(){$.ajax({url:"/ajax_change_table",data:"toImages="+img.id,success:function(a){a?alert(a):$("#toImages").fadeOut()}})}function h(){$.ajax({url:"/ajax_moderate",type:"post",data:"action=approve&live=1&iid="+img.id,success:function(){$("#img-approve").fadeOut()}})}function g(){$.ajax({url:"/ajax_moderate",type:"post",data:"action=disapprove&iid="+img.id,success:function(){$("#img-disapprove").fadeOut()}})}
function n(){if(confirm("Permanently delete this image?")){p("Deleting Image...");$.ajax({url:"/ajax_img_delete",data:"iid="+img.id,success:function(b){if(b){p(false);MSG(b,"red")}else a.location="/creations"}})}}function o(){$("#img-update").replaceWith("<p>Updating...</p>");$.ajax({url:"/ajax_img_update",data:{iid:img.id,title:$("#img-title-edit").val(),tags:$("#img-tags-edit").val(),desc:$("#img-desc-edit").val(),main_tag:$('input[name="img-main-tag-edit"]:checked').val()},success:function(b){b?
alert(b):a.location=a.location.href.replace(/\?lerp=[0-9]+/,"")+"?lerp="+ +new Date}})}function v(){if(!v.done){v.done=true;$(this).removeClass("l but sml").html("Loading...");r()}}function r(){$.ajax({url:"/ajax_img_admin",data:{iid:img.id},success:function(a){$("#img-edit-btn").remove();$("#img-admin").append(a)}})}function J(a){x(a);$(this).closest(".menu-wrap").find(".menu").toggle()}function z(){var b=I.user,d,c;if(b.id){$(".gen-anon-wrap").show();if(b.pro){$("#logo").after('<div id="pro-logo">pro</div>');
$(".pro-callout").remove()}d='<a href="/user/'+b.user+'">Profile</a><a href="/creations">My Images</a><a href="/notifications" id="menu-nots">Notifications</a><a href="/settings">Settings</a><a id="aLogout" href="javascript:void(0)">Logout</a>';c='<span id="u-user">'+b.user+'</span> <small>(<span id="u-points">'+b.points+"</span>)</small> ";$("#userTitle").after('<div id="numNots"'+(b.nots?' class="has-nots"':"")+">"+b.nots+"</div>")}else{$(".gen-login-wrap").show();$("#u-anon").show();d='<a href="javascript:void(0)" class="show-login">Login</a><a href="/signup">Signup</a>';
c="Login "}$("#userMenu").html(d);$("#u-long").html(c);switch(a.location.pathname.split("/")[1]){case "memegenerator":!b.pro&&a.sfw&&$(".head").prepend(i("2970038127"));b.pro&&$(".gen-no-watermark-wrap").show();b.priv>8&&$(".gen-wrap").append('<div class="mm-set-positions l but">[]</div>');break;case "gifgenerator":case "images-to-gif":b.pro||$(".head").prepend(i("9016571729"));break;case "i":case "gif":c=I.user;b=c.cookie_tags;d=["other","memes","gifs"];if(c.id){if(c.id===img.uid||c.id===img.stream_owner_uid||
c.priv>8){var e="",e=img.submitted?img.featured?"<span class='my-label-featured'>Featured</span>":"<span class='my-label-submitted'>Submitted</span>":"<span class='my-submit-btn l but sml' data-iid='"+img.id+"'>Submit Image</span>",e='<div id="img-admin" class="fWidget fPane clearfix"><div class="my-submit-status">'+e+"</div>"+(!img.featured?'<div id="img-edit-btn" class="l but sml">Edit Image</div>':"")+'<div id="img-delete" class="l but sml">Delete Image</div></div>';$("#fNav").after(e);s.on("click",
"#img-edit-btn",v).on("click","#img-delete",n).on("click","#img-update",o).on("click","#img-approve",h).on("click","#img-disapprove",g).on("click","#toImages",y);c.priv>8&&r()}I.vote==="1"&&$(".img-up").addClass("set");I.vote==="0"&&$(".img-down").addClass("set");ba()}c=c.flags>0?"NSFW":"SFW";$(".main-tags").append('<label class="safe-status-'+c+'"><input id="safe-button" type="checkbox"'+(c==="NSFW"?" checked":"")+" /> NSFW</label>");for(c=0;c<3;c++)b.charAt(c)==="1"&&$("#show-"+d[c]).prop("checked",
true);I.can_claim&&$("#img-panel").before('<div class="ibox img-claim-msg">You created this image, but you were not logged in. You\'ll only be able to claim it for up to an hour after you created it. <a href="/login?claim_iid='+img.id+'">Login to claim or delete it</a></div>')}}a.embedCodes=m;a.insertShares=l;a.adsenseCode=i;I.done&&z();$(function(){nt=nt_off=nt_on=0;$(".menu-wrap").each(function(){var a=$(this),b=a.find(".menu");a.hover(function(){b.show()},function(){b.hide()})});s.on("vclick",
".my-submit-btn",function(){ca($(this).attr("data-iid"))}).on("click",".img-flag-cancel",la).on("click",".img-flag-submit",ma).on("click",".img-flag",ka).on("vclick",".img-flip",Z).on("submit","#sForm",X).on("click","#login-button",W).on("vclick",".menu-btn",J).on("click",".show-login",A).on("vclick","#numNots",fa).on("vclick","#aLogout",ea).on("click",".gen-no-watermark",function(a){if(!I.user.pro){da("You can remove our watermark and get a bunch of other cool upgrades with Imgflip Pro!",({"/gifgenerator":"vgif",
"/images-to-gif":"igif"}[location.pathname]||location.pathname)+"_watermark");return x(a)}});oa>1120&&a.location.pathname.substr(0,3)!=="/m/"&&$("body").append('<a rel="nofollow" target="_blank" href="/feedback?url='+a.location.href+'"><div class="feedback">Feedback</div></a>');applyTips();e();B()});a.initHome=function(){var a=$(".base-unit").eq(5),e=P(function(){if(a.offset().top-k.height()-k.scrollTop()<100){$("div.base-img").quickEach(function(){this.replaceWith('<img class="'+this.attr("class")+
'" src="'+this.data("src")+'" alt="'+this.data("alt")+'"/>')});k.off("scroll",e)}});if(a[0]){k.on("scroll",e);e()}s.on("vclick",".base-toggle-main-tags",function(){$(".main-tags").toggleClass("force-show")}).on("vclick",".base-toggle-leaderboard",function(){$("#base-right,#leaderboard").toggleClass("force-show")});b(d)};a.initFlip=function(){if(a.img){fetching=submitting=0;hasComs=true;lastCom=0;b(j);H("#im");$("#c-new-main").find(".c-new-text").focus(function(){I.done&&!w()&&A()});$("#img-prev,#img-next").click(function(b){var c=
$(this).attr("href");_gaq.push(["_set","hitCallback",function(){a.location=c}]);_gaq.push(["_trackEvent","Flip Nav",$(this).attr("id"),location.href]);if(I.user.id===27)a.location=c;x(b)});$(".img-down").click(function(){E(img.id,0,this.parentNode)});$(".img-up").click(function(){E(img.id,1,this.parentNode)});H(".c-text img");l("#fShare",img.id.toString(36),img.type,F.title.split(" - Imgflip")[0].split(/ Meme$/)[0]);$("#img-embed-codes-btn").click(f);N();s.on("focus","input,textarea",function(){N(false)}).on("blur",
"input,textarea",N).on("click",".bad-com",function(){var a=$(this),b=a.closest(".com"),c=b.find(".c-text");c.append(c.data("text"));b.removeClass("hidden");for(b=b.next();b.hasClass("child-of-bad");){b.removeClass("child-of-bad");b=b.next()}a.remove()}).on("click",".c-up,.c-down",ja).on("click",".c-delete",ga).on("click",".c-reply",ha).on("click",".c-add-btn",function(){aa(img.id,false,$(this).closest(".c-new-wrap"))}).on("click",".c-meme-btn",function(){showGenerator($(this).closest(".c-new-wrap"))}).on("click",
".comRight",function(a){if(["com","comRight","c-text","comStats"].indexOf($(a.target).attr("class"))!==-1){for(var a=$(this).closest(".com"),b=~~a.data("l"),c=a.next(),d=a.hasClass("collapsed"),e=false;~~c.data("l")>b;){d?c.show():c.hide();c=c.next();e=true}e&&a.toggleClass("collapsed",!d)}}).on("click",".c-img-link",function(){var a=$(this);if(a.data("shown")){a.next(".c-img").hide();a.data("shown",false)}else{a.after('<img class="c-img" src="//'+a.text().split(" ")[0]+'"/>');H(a.next());a.data("shown",
true)}});var c=$(".com").eq(7),d=P(function(){if(c.offset().top-k.height()-k.scrollTop()<100){$(".c-lazy-img").quickEach(function(){this.replaceWith('<img src="'+this.data("src")+'"/>')});k.off("scroll",d);H(".c-text img")}});if(c[0]){k.on("scroll",d);d()}}};a.initData=z})(d);(function(a,b,c,d){function e(a){for(;a&&"undefined"!==typeof a.originalEvent;)a=a.originalEvent;return a}function k(b){for(var c={},d,e;b;){d=a.data(b,r);for(e in d)d[e]&&(c[e]=c.hasVirtualBinding=true);b=b.parentNode}return c}
function f(){t&&(clearTimeout(t),t=0);t=setTimeout(function(){K=t=0;G.length=0;D=false;w=true},a.vmouse.resetTimerDuration)}function m(b,c,f){var g,i;if(!(i=f&&f[b])){if(f=!f)a:for(f=c.target;f;){if((i=a.data(f,r))&&(!b||i[b]))break a;f=f.parentNode}i=f}if(i){g=c;var f=g.type,h,k;g=a.Event(g);g.type=b;b=g.originalEvent;i=a.event.props;-1<f.search(/^(mouse|click)/)&&(i=q);if(b){k=i.length;for(h;k;){h=i[--k];g[h]=b[h]}}-1<f.search(/mouse(down|up)|click/)&&!g.which&&(g.which=1);if(-1!==f.search(/^touch/)&&
(h=e(b),f=h.touches,h=h.changedTouches,b=f&&f.length?f[0]:h&&h.length?h[0]:d)){f=0;for(i=z.length;f<i;f++){h=z[f];g[h]=b[h]}}a(c.target).trigger(g)}return g}function l(b){var c=a.data(b.target,s);if(!D&&(!K||K!==c))if(c=m("v"+b.type,b)){c.isDefaultPrevented()&&b.preventDefault();c.isPropagationStopped()&&b.stopPropagation();c.isImmediatePropagationStopped()&&b.stopImmediatePropagation()}}function i(b){var c=e(b).touches,d;c&&1===c.length&&(d=b.target,c=k(d),c.hasVirtualBinding&&(K=H++,a.data(d,s,
K),t&&(clearTimeout(t),t=0),C=w=false,d=e(b).touches[0],x=d.pageX,B=d.pageY,m("vmouseover",b,c),m("vmousedown",b,c)))}function p(a){w||(C||m("vmousecancel",a,k(a.target)),C=true,f())}function h(b){if(!w){var c=e(b).touches[0],d=C,g=a.vmouse.moveDistanceThreshold,h=k(b.target);(C=C||Math.abs(c.pageX-x)>g||Math.abs(c.pageY-B)>g)&&!d&&m("vmousecancel",b,h);m("vmousemove",b,h);f()}}function g(a){if(!w){w=true;var b=k(a.target),c;m("vmouseup",a,b);if(!C&&(c=m("vclick",a,b))&&c.isDefaultPrevented()){c=
e(a).changedTouches[0];G.push({touchID:K,x:c.clientX,y:c.clientY});D=true}m("vmouseout",a,b);C=false;f()}}function n(b){var b=a.data(b,r),c;if(b)for(c in b)if(b[c])return true;return false}function o(){}function v(b){var c=b.substr(1);return{setup:function(){n(this)||a.data(this,r,{});a.data(this,r)[b]=true;u[b]=(u[b]||0)+1;1===u[b]&&y.bind(c,l);a(this).bind(c,o);A&&(u.touchstart=(u.touchstart||0)+1,1===u.touchstart&&y.bind("touchstart",i).bind("touchend",g).bind("touchmove",h).bind("scroll",p))},
teardown:function(){--u[b];u[b]||y.unbind(c,l);A&&(--u.touchstart,u.touchstart||y.unbind("touchstart",i).unbind("touchmove",h).unbind("touchend",g).unbind("scroll",p));var d=a(this),e=a.data(this,r);e&&(e[b]=false);d.unbind(c,o);n(this)||d.removeData(r)}}}var r="virtualMouseBindings",s="virtualTouchID",b=["vmouseover","vmousedown","vmousemove","vmouseup","vclick","vmouseout","vmousecancel"],z=["clientX","clientY","pageX","pageY","screenX","screenY"],q=a.event.props.concat(a.event.mouseHooks?a.event.mouseHooks.props:
[]),u={},t=0,x=0,B=0,C=false,G=[],D=false,w=false,A="addEventListener"in c,y=a(c),H=1,K=0,F;a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var E=0;E<b.length;E++)a.event.special[b[E]]=v(b[E]);A&&c.addEventListener("click",function(b){var c=G.length,d=b.target,e,f,g,h,i;if(c){e=b.clientX;f=b.clientY;F=a.vmouse.clickDistanceThreshold;for(g=d;g;){for(h=0;h<c;h++)if(i=G[h],g===d&&Math.abs(i.x-e)<F&&Math.abs(i.y-f)<F||a.data(g,s)===i.touchID){b.preventDefault();
b.stopPropagation();return}g=g.parentNode}}},true)})(jQuery,d,F)})(window,document,$w,$d);